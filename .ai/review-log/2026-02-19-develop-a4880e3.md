# AI Review â€” develop @ a4880e3
Date: 2026-02-18 19:02 UTC
Stack: Terraform,GitHub Actions
Diff: 571 lines vs main

## Commits
a4880e3 PrePush trials 9
e4a26e2 PrePush trials 8
dbf301c PrePush trials 7
2e72c4f PrePush trials6
f063d2b PrePush trials 5
706e252 PrePush trials 4
0ba61cd PrePush trials 3
c2acf27 PrePush trials 2
abf9d00 PrePush trials
857127a Ugh - forgot the actual document process linking work
87d5878 Thanks Claude - assistance with the IAM script
e204064 Removed more references to access_token
dbbf038 Removed knock feature
80d1fe6 Pathing adj
15a242d New mapping and path
b213fb9 Adjustments to documentation to use mermaid 9
2f8293c Adjustment for docpublish again
3918bb5 Adjustment for docpublish again
c9bdc37 Adjustment for docpublish again
bb39c90 Adjustment for docpublish
e8f1e7a Adjustment for docpublish
158fcea Testing doc publish
684e285 Added IAM validator
e430761 Merge pull request #2 from otherbadcoder-bne/develop
8806d68 Merge pull request #1 from otherbadcoder-bne/develop

## Findings
BLOCK: The code knowingly implements a critical bug where the CloudFront origin will break upon the first scheduled EC2 restart.
*   [BLOCK] The CloudFront distribution origin is set to the EC2 instance's public DNS (`aws_instance.wiki.public_dns` in `wiki.js/cloudfront.tf`). However, `wiki.js/scheduler.tf` configures a schedule to stop and start this same instance. When the instance restarts, its public DNS will change, breaking the CloudFront origin and causing a critical outage. This exact issue is documented as a Critical bug in the newly added `.ai/docs/bug-list.md` file, but the code itself remains unfixed. Pushing a known, critical, guaranteed failure is a major issue.
*   [WARN] The diff introduces extensive documentation (`.ai/docs/bug-list.md`, `.ai/docs/performance.md`) that catalogs numerous other high-severity security risks and architectural flaws, including unencrypted traffic between CloudFront and the origin, unrestricted egress traffic from the EC2 instance, and disabled CloudFront caching. While documenting technical debt is useful, committing the documentation without any accompanying code changes to address these severe issues is a process smell. It indicates an intent to proceed with a known-vulnerable and brittle architecture.
*   [WARN] The EC2 instance security group (`aws_vpc_security_group_egress_rule.all` in `wiki.js/ec2.tf`) allows all outbound traffic to `0.0.0.0/0`. If the web server is compromised, it could be used to launch attacks or exfiltrate data to anywhere on the internet. Egress should be restricted to only what is necessary (e.g., port 443 for package updates). This is also noted in the new `bug-list.md`.
*   [INFO] The repository now contains two scripts with the identical name `validate-iam-policies.sh` (one in `scripts/`, one in `wiki.js/scripts/`). As noted in the new `bug-list.md`, this is confusing and error-prone. They should be renamed to reflect their different roles (e.g., a top-level dispatcher and a project-specific validator).
